<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Faculty Suggestions</title>
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <!-- Header -->
    <div class="header">
      <div class="logo">
        <div class="logo-icon"></div>
        <span>Faculty Suggestion Portal</span>
      </div>
      <button
        class="admin-btn"
        onclick="window.location.href='admin-login.html'"
      >
        Admin Access
      </button>
    </div>

    <!-- Main Container -->
    <div class="container">
      <button id="globalBackBtn" class="global-back" onclick="goBack()">
        â† Back
      </button>

      <!-- Step 1: Home Page -->
      <div id="step1" class="step active">
        <!-- Hero Section -->
        <div class="hero">
          <h1>Share Your Voice. Shape Our Faculty.</h1>
          <p>
            Submit your ideas and feedback to help us build a better learning
            environment together.
          </p>
        </div>

        <!-- Main Actions Grid -->
        <div class="home-grid">
          <!-- Submit Suggestion Card -->
          <div class="home-card submit-card">
            <div class="card-icon">âœï¸</div>
            <h3>Submit New Suggestion</h3>
            <p>Share your feedback with the faculty anonymously or publicly</p>
            <div class="role-buttons">
              <button class="btn-role" onclick="chooseRole('Student')">
                ğŸ‘¨â€ğŸ“ I'm a Student
              </button>
              <button class="btn-role" onclick="chooseRole('Lecturer')">
                ğŸ‘¨â€ğŸ« I'm a Lecturer
              </button>
            </div>
          </div>

          <!-- Track Suggestion Card -->
          <div class="home-card track-card">
            <div class="card-icon">ğŸ”</div>
            <h3>Track Your Suggestion</h3>
            <p>Check the status and admin response for your submission</p>

            <div class="track-options">
              <div class="track-option">
                <label>By Tracking ID (Anonymous)</label>
                <div class="track-input-group">
                  <input
                    type="text"
                    id="trackingIdInput"
                    placeholder="e.g., LU1WVZO-B6HU"
                    maxlength="20"
                  />
                  <button class="btn-track" onclick="searchByTrackingId()">
                    Search
                  </button>
                </div>
              </div>

              <div class="divider-text">OR</div>

              <div class="track-option">
                <label>By Email Address</label>
                <div class="track-input-group">
                  <input
                    type="email"
                    id="emailInput"
                    placeholder="your.email@example.com"
                  />
                  <button class="btn-track" onclick="searchByEmail()">
                    Search
                  </button>
                </div>
              </div>
            </div>
          </div>

          <!-- Generate Report Card -->
          <div class="home-card report-card">
            <div class="card-icon">ğŸ“Š</div>
            <h3>Download Report</h3>
            <p>View and download admin responses with custom filters</p>

            <button class="btn-expand-filters" onclick="toggleFilters()">
              <span id="filterToggleText">Show Filters</span>
              <span id="filterToggleIcon">â–¼</span>
            </button>

            <div
              class="filters-wrapper"
              id="filtersWrapper"
              style="display: none"
            >
              <div class="filters-container">
                <!-- Department Filter -->
                <div class="filter-group">
                  <label for="filterDepartment">
                    <span class="filter-icon">ğŸ¢</span> Department
                  </label>
                  <select id="filterDepartment" class="filter-select">
                    <option value="all">All Departments</option>
                    <option value="Department of Business Management">
                      Business Management
                    </option>
                    <option value="Department of Accountancy and Finance">
                      Accountancy & Finance
                    </option>
                    <option value="Department of Marketing Management">
                      Marketing Management
                    </option>
                    <option value="Department of Tourism Management">
                      Tourism Management
                    </option>
                    <option value="Other">Other</option>
                  </select>
                </div>

                <!-- Date Range Filter -->
                <div class="filter-group">
                  <label for="filterDateFrom">
                    <span class="filter-icon">ğŸ“…</span> From Date
                  </label>
                  <input type="date" id="filterDateFrom" class="filter-input" />
                </div>

                <div class="filter-group">
                  <label for="filterDateTo">
                    <span class="filter-icon">ğŸ“…</span> To Date
                  </label>
                  <input type="date" id="filterDateTo" class="filter-input" />
                </div>

                <!-- Response Type Filter -->
                <div class="filter-group">
                  <label for="filterType">
                    <span class="filter-icon">ğŸ“</span> Type
                  </label>
                  <select id="filterType" class="filter-select">
                    <option value="all">All Responses</option>
                    <option value="public">Public Only</option>
                    <option value="anonymous">Anonymous Only</option>
                  </select>
                </div>
              </div>

              <div class="filter-actions">
                <button class="btn-reset-filters" onclick="resetFilters()">
                  ğŸ”„ Reset
                </button>
              </div>
            </div>

            <button class="btn-download-report" onclick="downloadReport()">
              ğŸ“„ Download Report (PDF)
            </button>

            <!-- Divider with Tip -->
            <div class="report-divider">
              <span>TIP</span>
            </div>

            <p class="report-tip">
              ğŸ’¡ To download the full report with all responses, leave the
              filters empty or reset them before downloading.
            </p>
          </div>
        </div>
      </div>

      <!-- Step 2: Department Selection -->
      <div id="step2" class="step">
        <div class="dept-header">
          <h2>Select Your Department</h2>
          <p>Choose the department your feedback is related to</p>
        </div>

        <div class="dept-grid">
          <div
            class="dept-card"
            onclick="selectDept(this, 'Department of Business Management', 'ğŸ’¼', 'business')"
          >
            <div class="dept-icon">ğŸ’¼</div>
            <h3>Business Management</h3>
            <p>Business education and management practices</p>
          </div>

          <div
            class="dept-card"
            onclick="selectDept(this, 'Department of Accountancy and Finance', 'ğŸ’°', 'accountancy')"
          >
            <div class="dept-icon">ğŸ’°</div>
            <h3>Accountancy & Finance</h3>
            <p>Financial education and accountancy programs</p>
          </div>

          <div
            class="dept-card"
            onclick="selectDept(this, 'Department of Marketing Management', 'ğŸ“¢', 'marketing')"
          >
            <div class="dept-icon">ğŸ“¢</div>
            <h3>Marketing Management</h3>
            <p>Marketing curriculum and industry connections</p>
          </div>

          <div
            class="dept-card"
            onclick="selectDept(this, 'Department of Tourism Management', 'ğŸŒ', 'tourism')"
          >
            <div class="dept-icon">ğŸŒ</div>
            <h3>Tourism Management</h3>
            <p>Tourism and hospitality education</p>
          </div>

          <div
            class="dept-card"
            onclick="selectDept(this, 'Other', 'â‹¯', 'other')"
          >
            <div class="dept-icon">â‹¯</div>
            <h3>Other</h3>
            <p>General feedback or other departments</p>
          </div>
        </div>

        <!-- <div class="nav-buttons">
          <button class="btn secondary" onclick="goBack(1)">Back</button>
          <button class="btn" onclick="nextStep()">Next</button>
        </div> -->
      </div>

      <!-- Step 3: Suggestion Form -->
      <div id="step3" class="step">
        <div class="form-wrapper">
          <div class="dept-banner">
            <div class="dept-banner-icon" id="bannerIcon">ğŸ’¼</div>
            <h2 id="bannerTitle">Department of Business Management</h2>
            <p id="bannerSubtitle">Share your valuable feedback with us</p>
            <span class="role-badge" id="roleBadge">Student</span>
          </div>

          <div class="form-container">
            <h3>Write your suggestion</h3>

            <div class="form-group">
              <label for="senderEmail">
                Email <span class="optional">(optional)</span>
              </label>
              <input
                type="email"
                id="senderEmail"
                placeholder="your.email@example.com"
              />
            </div>

            <div class="form-group">
              <label for="suggestion">Your Suggestion</label>
              <textarea
                id="suggestion"
                placeholder="Type your suggestion here... Share your thoughts, ideas, or feedback to help us improve."
                maxlength="5000"
                oninput="updateCharCount()"
              ></textarea>
              <div class="char-counter">
                <span id="charCount">0</span> / 5000 characters
              </div>
            </div>

            <!-- Anonymous Submission Checkbox -->
            <div class="form-group checkbox-group">
              <label class="checkbox-label">
                <input
                  type="checkbox"
                  id="anonymousCheck"
                  onchange="toggleAnonymous()"
                />
                <span class="checkbox-text">
                  <strong>Submit Anonymously</strong>
                  <span class="checkbox-desc"
                    >Your identity will be hidden. You'll receive a unique
                    tracking ID.</span
                  >
                </span>
              </label>
            </div>

            <!-- Honeypot for bots -->
            <input
              type="text"
              id="hp_field"
              style="display: none"
              tabindex="-1"
              autocomplete="off"
            />

            <div class="nav-buttons">
              <!-- <button class="btn secondary" onclick="goBack(2)">Back</button> -->
              <button class="btn" id="submitBtn" onclick="submitSuggestion()">
                Send Suggestion
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Footer -->
    <footer class="footer">
      <div class="footer-content">
        <div class="footer-links">
          <button class="btn secondary" onclick="openPopup('about-popup')">
            About
          </button>
          <button class="btn secondary" onclick="openPopup('it-popup')">
            IT Support
          </button>
        </div>
        <p class="footer-copyright">
          &copy; <span id="current-year"></span> Faculty Suggestion Portal. All
          rights reserved.
        </p>
      </div>
    </footer>

    <!-- About Popup -->
    <div id="about-popup" class="popup-overlay">
      <div class="popup-box">
        <h2>About This Website</h2>
        <p>
          The Faculty Suggestions platform is a digital alternative to
          traditional physical suggestion boxes used in the Faculty of
          Management Studies. It allows students, lecturers, and staff to
          conveniently share their ideas, feedback, or concerns from any device.
          By scanning the QR code displayed on notice boards or visiting the
          website link, users can easily access the suggestion form. Simply
          select your department, type your suggestion, and click "Send
          Suggestion." Your feedback will be automatically directed to the
          relevant Head of Department's inbox, ensuring your voice is heard
          quickly and efficiently.
        </p>
        <button class="btn close-btn" onclick="closePopup('about-popup')">
          Close
        </button>
      </div>
    </div>

    <!-- IT Support Popup -->
    <div id="it-popup" class="popup-overlay">
      <div class="popup-box">
        <h2>IT Support</h2>
        <p>
          For any technical issues or inquiries, please contact the development
          team:
        </p>
        <ul>
          <li>
            <strong>Vishwa Wijesekare</strong> â€” araliyawijesakare@gmail.com
          </li>
          <li><strong>Menath Nadungoda</strong> â€” nadungmenath1@gmail.com</li>
        </ul>
        <button class="btn close-btn" onclick="closePopup('it-popup')">
          Close
        </button>
      </div>
    </div>

    <!-- Anonymous ID Popup -->
    <div id="anonymous-popup" class="popup-overlay">
      <div class="popup-box anonymous-success">
        <div class="success-icon">âœ…</div>
        <h2>Suggestion Submitted Anonymously</h2>
        <p>Your suggestion has been submitted successfully!</p>
        <div class="tracking-id-box">
          <p class="tracking-label">Your Tracking ID:</p>
          <p class="tracking-id" id="trackingId">XXXX-XXXX-XXXX</p>
          <button class="btn-copy" onclick="copyTrackingId()">
            ğŸ“‹ Copy ID
          </button>
        </div>
        <p class="tracking-info">
          Save this ID to track the admin response to your suggestion. You can
          search for it on the homepage.
        </p>
        <button class="btn close-btn" onclick="closeAnonymousPopup()">
          Close
        </button>
      </div>
    </div>

    <!-- Search Results Popup -->
    <div id="search-results-popup" class="popup-overlay">
      <div class="popup-box search-results-box">
        <h2 id="searchResultsTitle">Search Results</h2>
        <div id="searchResultsContent" class="search-results-content">
          <!-- Results will be inserted here -->
        </div>
        <div class="search-actions">
          <button class="btn" onclick="downloadSearchResults()">
            ğŸ“„ Download as PDF
          </button>
          <button
            class="btn secondary"
            onclick="closePopup('search-results-popup')"
          >
            Close
          </button>
        </div>
      </div>
    </div>

    <!-- Popup Notification -->
    <div id="popup" class="popup"></div>

    <script src="script.js"></script>
  </body>
</html>
